<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vscode插件开发 | 前端知识体系</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/tech-blog/images/favicon.ico">
    <meta name="description" content="收录前端学习涉及的内容总结">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    
    <link rel="preload" href="/tech-blog/assets/css/0.styles.936d675d.css" as="style"><link rel="preload" href="/tech-blog/assets/js/app.637b0608.js" as="script"><link rel="preload" href="/tech-blog/assets/js/2.f2dca868.js" as="script"><link rel="preload" href="/tech-blog/assets/js/40.36460bcd.js" as="script"><link rel="preload" href="/tech-blog/assets/js/3.d046dc27.js" as="script"><link rel="prefetch" href="/tech-blog/assets/js/10.414784e6.js"><link rel="prefetch" href="/tech-blog/assets/js/11.85a4df20.js"><link rel="prefetch" href="/tech-blog/assets/js/12.24af88f9.js"><link rel="prefetch" href="/tech-blog/assets/js/13.b2b89f3f.js"><link rel="prefetch" href="/tech-blog/assets/js/14.1acabf33.js"><link rel="prefetch" href="/tech-blog/assets/js/15.8546cf66.js"><link rel="prefetch" href="/tech-blog/assets/js/16.14c6bd0c.js"><link rel="prefetch" href="/tech-blog/assets/js/17.a2a9698c.js"><link rel="prefetch" href="/tech-blog/assets/js/18.d85efb95.js"><link rel="prefetch" href="/tech-blog/assets/js/19.ddbbc2fe.js"><link rel="prefetch" href="/tech-blog/assets/js/20.435325d5.js"><link rel="prefetch" href="/tech-blog/assets/js/21.8189ab63.js"><link rel="prefetch" href="/tech-blog/assets/js/22.c92c7020.js"><link rel="prefetch" href="/tech-blog/assets/js/23.542786df.js"><link rel="prefetch" href="/tech-blog/assets/js/24.e4ba9d55.js"><link rel="prefetch" href="/tech-blog/assets/js/25.051dbda2.js"><link rel="prefetch" href="/tech-blog/assets/js/26.ec34ded3.js"><link rel="prefetch" href="/tech-blog/assets/js/27.f4b88994.js"><link rel="prefetch" href="/tech-blog/assets/js/28.fcd7878e.js"><link rel="prefetch" href="/tech-blog/assets/js/29.23106971.js"><link rel="prefetch" href="/tech-blog/assets/js/30.6a710278.js"><link rel="prefetch" href="/tech-blog/assets/js/31.fb01c8e0.js"><link rel="prefetch" href="/tech-blog/assets/js/32.fd23bb6c.js"><link rel="prefetch" href="/tech-blog/assets/js/33.8da1c46c.js"><link rel="prefetch" href="/tech-blog/assets/js/34.d8da18ad.js"><link rel="prefetch" href="/tech-blog/assets/js/35.ecd28619.js"><link rel="prefetch" href="/tech-blog/assets/js/36.d00c3ec5.js"><link rel="prefetch" href="/tech-blog/assets/js/37.1c7de521.js"><link rel="prefetch" href="/tech-blog/assets/js/38.a07fd877.js"><link rel="prefetch" href="/tech-blog/assets/js/39.6fda6c71.js"><link rel="prefetch" href="/tech-blog/assets/js/4.89ec52c4.js"><link rel="prefetch" href="/tech-blog/assets/js/41.a8a2f08b.js"><link rel="prefetch" href="/tech-blog/assets/js/42.dfc6d188.js"><link rel="prefetch" href="/tech-blog/assets/js/43.6c5e7ccd.js"><link rel="prefetch" href="/tech-blog/assets/js/44.f5b788f2.js"><link rel="prefetch" href="/tech-blog/assets/js/5.c6df70b3.js"><link rel="prefetch" href="/tech-blog/assets/js/6.387a1608.js"><link rel="prefetch" href="/tech-blog/assets/js/7.7ba54467.js"><link rel="prefetch" href="/tech-blog/assets/js/8.7b1bbb2b.js"><link rel="prefetch" href="/tech-blog/assets/js/9.46af88e5.js">
    <link rel="stylesheet" href="/tech-blog/assets/css/0.styles.936d675d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tech-blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/GuoLiBin6/tech-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/tech-blog/images/avatar.jpeg"> <div class="blogger-info"><h3>GuoLiBin6</h3> <span>程序员永不下班</span></div></div> <nav class="nav-links"> <a href="https://github.com/GuoLiBin6/tech-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/tech-blog/pages/405749/" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>收录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>搞事啦</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech-blog/pages/7f7fee/" class="sidebar-link">爬虫</a></li></ul></section></li><li><a href="/tech-blog/pages/eda97b/" aria-current="page" class="active sidebar-link">vscode插件开发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/eda97b/#一、环境准备及项目初始化" class="sidebar-link">一、环境准备及项目初始化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_1-准备环境" class="sidebar-link">1. 准备环境</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_2-初始化插件项目" class="sidebar-link">2. 初始化插件项目</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_3-插件运行及调试" class="sidebar-link">3. 插件运行及调试</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_4-开发初试" class="sidebar-link">4. 开发初试</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#a-修改hello-world命令行为" class="sidebar-link">a. 修改Hello World命令行为</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#b-定义命令弹出警告框" class="sidebar-link">b. 定义命令弹出警告框</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/eda97b/#二、了解插件能力及项目架构" class="sidebar-link">二、了解插件能力及项目架构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_1-插件能干什么" class="sidebar-link">1. 插件能干什么</a></li><li class="sidebar-sub-header level5"><a href="/tech-blog/pages/eda97b/#a-插件通用功能" class="sidebar-link">a. 插件通用功能</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#b-主题化" class="sidebar-link">b. 主题化</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#c-声明性语言特性" class="sidebar-link">c. 声明性语言特性</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#d-程序语言特性" class="sidebar-link">d. 程序语言特性</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#e-扩展工作台" class="sidebar-link">e. 扩展工作台</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#f-调试" class="sidebar-link">f. 调试</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_2-项目结构" class="sidebar-link">2. 项目结构</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#a-package-json" class="sidebar-link">a. package.json</a></li><li class="sidebar-sub-header level5"><a href="/tech-blog/pages/eda97b/#_1-main" class="sidebar-link">1）main</a></li><li class="sidebar-sub-header level5"><a href="/tech-blog/pages/eda97b/#_2-activationevents" class="sidebar-link">2）activationEvents</a></li><li class="sidebar-sub-header level5"><a href="/tech-blog/pages/eda97b/#_3-contributes" class="sidebar-link">3）contributes</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/eda97b/#三、开发实战" class="sidebar-link">三、开发实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_1-插件目标" class="sidebar-link">1. 插件目标</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_2-目标实现" class="sidebar-link">2. 目标实现</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#a-增加右键菜单" class="sidebar-link">a. 增加右键菜单</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#b-程序获取用户选择文本" class="sidebar-link">b. 程序获取用户选择文本</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#c-用户选择文本后自动弹出提示" class="sidebar-link">c. 用户选择文本后自动弹出提示</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#d-实现翻译" class="sidebar-link">d. 实现翻译</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/eda97b/#四、发布" class="sidebar-link">四、发布</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_1-发布方式" class="sidebar-link">1. 发布方式</a></li><li class="sidebar-sub-header level5"><a href="/tech-blog/pages/eda97b/#a-本地文件" class="sidebar-link">a. 本地文件</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#b-打包成-vsix-插件" class="sidebar-link">b. 打包成 vsix 插件</a></li><li class="sidebar-sub-header level4"><a href="/tech-blog/pages/eda97b/#c-发布到官网应用市场" class="sidebar-link">c. 发布到官网应用市场</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_2-打包成-vsix-插件" class="sidebar-link">2. 打包成 vsix 插件</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/eda97b/#_3-发布到官网" class="sidebar-link">3. 发布到官网</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/tech-blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/tech-blog/categories/?category=%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB" title="分类" data-v-1baff76c>前端知识体系</a></li><li data-v-1baff76c><a href="/tech-blog/categories/?category=%E6%90%9E%E4%BA%8B%E5%95%A6" title="分类" data-v-1baff76c>搞事啦</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/GuoLiBin6" target="_blank" title="作者" class="beLink" data-v-1baff76c>GuoLiBin6</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2023-05-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">vscode插件开发<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p>简单的中英翻译的vscode插件实现全过程介绍</p> <h2 id="一、环境准备及项目初始化"><a href="#一、环境准备及项目初始化" class="header-anchor">#</a> 一、环境准备及项目初始化</h2> <h3 id="_1-准备环境"><a href="#_1-准备环境" class="header-anchor">#</a> 1. 准备环境</h3> <p>先使用的是 centsos 开发环境，但是会一直有权限问题，所以切换到了 mac 开发环境</p> <p>确保安装了 Node.js 和 Git，安装以下工具：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install -g yo generator-code
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_2-初始化插件项目"><a href="#_2-初始化插件项目" class="header-anchor">#</a> 2. 初始化插件项目</h3> <p>生成器搭建一个准备开发的 TypeScript 或 JavaScript 项目。运行生成器并为 TypeScript 项目填写几个字段：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token operator">&gt;</span> yo code

     _-----_     ╭──────────────────────────╮
    <span class="token operator">|</span>       <span class="token operator">|</span>    │   Welcome to the Visual  │
    <span class="token operator">|</span>--<span class="token punctuation">(</span>o<span class="token punctuation">)</span>--<span class="token operator">|</span>    │   Studio Code Extension  │
   <span class="token variable"><span class="token variable">`</span>---------´   │        generator<span class="token operator">!</span>        │
    <span class="token punctuation">(</span> _´U<span class="token variable">`</span></span>_ <span class="token punctuation">)</span>    ╰──────────────────────────╯
    /___A___<span class="token punctuation">\</span>   /
     <span class="token operator">|</span>  ~  <span class="token operator">|</span>     
   __<span class="token string">'.___.'</span>__   
 ´   <span class="token variable"><span class="token variable">`</span>  <span class="token operator">|</span>° ´ Y <span class="token variable">`</span></span> 

? What <span class="token builtin class-name">type</span> of extension <span class="token keyword">do</span> you want to create? New Extension <span class="token punctuation">(</span>TypeScript<span class="token punctuation">)</span>
? What<span class="token string">'s the name of your extension? WordTranslate
? What'</span>s the identifier of your extension? wordtranslate
? What's the description of your extension? 
? Initialize a <span class="token function">git</span> repository? Yes
? Bundle the <span class="token builtin class-name">source</span> code with webpack? Yes
? Which package manager to use? <span class="token function">npm</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_3-插件运行及调试"><a href="#_3-插件运行及调试" class="header-anchor">#</a> 3. 插件运行及调试</h3> <p>项目生成完后，在编辑器中，按 F5 ，会弹出配置提示，选择【配置任务】，随后选择 【npm:compile】即可</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <p>完成后编辑器会开启一个新的窗口，标题为 [扩展开发宿主机]， 在这个窗口中已经加载了我们的插件，就可以使用了</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <p>打出组合键 ⇧⌘P，输入 &gt;Hello World 随后回车，在编辑器右下角，就可以看到我们的插件的通知了</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <h3 id="_4-开发初试"><a href="#_4-开发初试" class="header-anchor">#</a> 4. 开发初试</h3> <h4 id="a-修改hello-world命令行为"><a href="#a-修改hello-world命令行为" class="header-anchor">#</a> a. 修改Hello World命令行为</h4> <p>修改 src/extension.ts 中 Hello World from WordTranslate!为 Hello vscode !，随后调出命令preload，选择 【开发人员：重新加载窗口】,重新加载插件，随后 执行Hello Wold命令，查看变化</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <p>以上是以 Hello World 命令做出一个普通提示框。也可以自定义其他命令做出其他操作</p> <h4 id="b-定义命令弹出警告框"><a href="#b-定义命令弹出警告框" class="header-anchor">#</a> b. 定义命令弹出警告框</h4> <p>package.json</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.helloWorld&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 新增 DoNotSupport 命令</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.doNotSupport&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DoNotSupport&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>src/extension.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token comment">// 增加 doNotSupport 命令的注册</span>
  <span class="token keyword">let</span> doNotSupport <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'wordtranslate.doNotSupport'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showWarningMessage</span><span class="token punctuation">(</span><span class="token string">'您当前编辑器不支持此版本插件！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>doNotSupport<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>重新加载窗口，执行命令 doNotSupport，可看到警告框</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <p>注：
以下为 package.json 中命令的配置参数示例，更多详细信息可参考 <a href="https://code.visualstudio.com/api/references/contribution-points#contributes.commands" target="_blank" rel="noopener noreferrer">Contribution Points | Visual Studio Code Extension API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;extension.sayHello&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;category&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;light&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/to/light/icon.svg&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;dark&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/to/dark/icon.svg&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>至此，项目就跑起来了</p> <h2 id="二、了解插件能力及项目架构"><a href="#二、了解插件能力及项目架构" class="header-anchor">#</a> 二、了解插件能力及项目架构</h2> <p>插件就是利用 vscode 给我们开放的一些API的基础上进行扩展功能的开发，从而解决开发中的一些问题，提高生产效率。这种插件化思想一方面使该代码编辑器更轻量化；另一方面能够充分利用社区的力量，为其提供更加多元化的插件。</p> <h3 id="_1-插件能干什么"><a href="#_1-插件能干什么" class="header-anchor">#</a> 1. 插件能干什么</h3> <h5 id="a-插件通用功能"><a href="#a-插件通用功能" class="header-anchor">#</a> a. 插件通用功能</h5> <p>可以在任何扩展中使用的核心功能，主要包括以下几点：</p> <ul><li><p>能够添加命令、配置项、快捷键、菜单项、右键菜单；</p></li> <li><p>存储工作区或全局数据；</p></li> <li><p>展示通知信息；</p></li> <li><p>使用快速选择收集用户的输入；</p></li> <li><p>打开文件选择器让用户去选择文件或文件夹；</p></li> <li><p>使用Progress API去阐述长时间运行的操作；</p></li></ul> <h4 id="b-主题化"><a href="#b-主题化" class="header-anchor">#</a> b. 主题化</h4> <p>控制vscode的外观，包括编辑器中源代码的颜色和vscode ui的颜色，其主要包含三种类型的主题：</p> <ul><li><p>颜色主题：其允许将颜色应用于VS Code UI组件和编辑器中的文本；</p></li> <li><p>文件图标主题：文件图标显示在VS Code UI中的位置，例如文件资源管理器、快速打开列表和编辑器选项卡；</p></li> <li><p>产品图标主题：在整个UI中使用的一组图标</p></li></ul> <h4 id="c-声明性语言特性"><a href="#c-声明性语言特性" class="header-anchor">#</a> c. 声明性语言特性</h4> <p>声明性语言功能为编程语言添加了基本的文本编辑支持，例如括号匹配、自动缩进和语法突出显示。</p> <h4 id="d-程序语言特性"><a href="#d-程序语言特性" class="header-anchor">#</a> d. 程序语言特性</h4> <p>编程语言功能添加了丰富的编程语言支持，例如悬停、转到定义、诊断错误、IntelliSense 和 CodeLens。</p> <h4 id="e-扩展工作台"><a href="#e-扩展工作台" class="header-anchor">#</a> e. 扩展工作台</h4> <p>工作台是指包含标题栏、活动栏、侧边栏、控制板、编辑组、状态栏等UI组件的整体Visual Studio Code UI。VS Code提供了各种API，允许将自己的组件添加到工作台。</p> <h4 id="f-调试"><a href="#f-调试" class="header-anchor">#</a> f. 调试</h4> <p>可以通过编写将 VS Code 的调试 UI 连接到特定调试器或运行时的调试器扩展来利用 VS Code 的调试功能。</p> <h3 id="_2-项目结构"><a href="#_2-项目结构" class="header-anchor">#</a> 2. 项目结构</h3> <p>以下是初始化项目完成后的目录结构，其中重要的就是 extension.ts 和 package.json 两个文件</p> <div align="left" data-v-00c1afd2><img src="" height="450" class="g-img" data-v-00c1afd2></div> <h4 id="a-package-json"><a href="#a-package-json" class="header-anchor">#</a> a. package.json</h4> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件名称</span>
  <span class="token property">&quot;displayName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;WordTranslate&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 显示在应用市场的名字</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件描述</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件版本号</span>
  <span class="token property">&quot;engines&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.77.0&quot;</span> <span class="token comment">// 最低支持的vscode版本</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;categories&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;Other&quot;</span> <span class="token comment">// 扩展类别</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 激活事件组，在哪些事件下会被激活</span>
  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./dist/extension.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 插件的主入口文件</span>
  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 贡献点</span>
    <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// 命令</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.helloWorld&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.doNotSupport&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DoNotSupport&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vscode:prepublish&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run package&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;compile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;watch&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --watch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;package&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack --mode production --devtool hidden-source-map&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;compile-tests&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -p . --outDir out&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;watch-tests&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tsc -p . -w --outDir out&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pretest&quot;</span><span class="token operator">:</span> <span class="token string">&quot;npm run compile-tests &amp;&amp; npm run compile &amp;&amp; npm run lint&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint src --ext ts&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./out/test/runTest.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// 开发依赖项</span>
    <span class="token property">&quot;@types/vscode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.77.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/glob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@types/node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16.x&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@typescript-eslint/eslint-plugin&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.56.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@typescript-eslint/parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.56.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.36.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;glob&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^8.1.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;mocha&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^10.2.0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.9.5&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ts-loader&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.4.2&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.76.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.0.1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@vscode/test-electron&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.3.0&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>文件中 activationEvents、main、contributes 这三个配置项需要格外关注</p> <h5 id="_1-main"><a href="#_1-main" class="header-anchor">#</a> 1）main</h5> <p>标明了插件的入口在哪，只有找对了入口，项目才能正确运行</p> <h5 id="_2-activationevents"><a href="#_2-activationevents" class="header-anchor">#</a> 2）activationEvents</h5> <p>标明该插件在何种情况下会被激活，只有激活后插件才能正常使用，官网已经指明了激活的时机，我们只需要设置对应的时机去激活插件就可以了。</p> <ul><li>onLanguage: 打开解析为特定的语言文件时被激活，如：onLanguage: python</li> <li>onCommand: 在调用命令时激活</li> <li>onDebug: 在启动调试之前被激活</li> <li>onDebugInitialConfigurations</li> <li>onDebugResolve</li> <li>workspaceContains: 每当打开文件夹并且该文件夹包含至少一个与glob模式匹配的文件时</li> <li>onFileSystem: 每当读取来自特定方案的文件和文件夹时</li> <li>onView: 当 vscode 侧栏中展开指定 id 的视图</li> <li>onUri: 当打开该扩展的系统范围的 Uri 时
<ul><li>onWebviewPanel</li> <li>onCustomEditor</li> <li>onAuthenticationRequest</li></ul></li> <li>*：只要一启动 vscode，该插件就被激活</li> <li>onStartupFinished</li></ul> <h5 id="_3-contributes"><a href="#_3-contributes" class="header-anchor">#</a> 3）contributes</h5> <ul><li>breakpoints：断点，可列出将启用断点的语言文件类型</li> <li>colors：颜色，提供新的主题颜色</li> <li>commands：命令，可设置由标题、类别、图标和启用状态组成的命令ui</li> <li>configuration：配置，提供将向用户开放的配置键</li> <li>configurationDefaults：为其他已注册的配置提供默认值并覆盖其默认值</li> <li>customEditors：标识自定义编辑器的信息</li> <li>debuggers：调试器</li> <li>grammars：语法</li> <li>icons：按插件id设置新图标和一个默认图标</li> <li>iconThemes：文件图标主题</li> <li>jsonValidation：为特定类型的文件提供验证框架</li> <li>keybindings：键绑定规则</li> <li>languages：编程语言的定义</li> <li>menus：菜单</li> <li>problemMatchers：问题匹配器</li> <li>problemPatterns：问题匹配器中使用的命名问题模式</li> <li>productIconThemes：产品图标主题</li> <li>resourceLabelFormatters：语义标记修饰符</li> <li>semanticTokenModifiers：语义标记类型和修饰符与范围之间的映射，作为回退或支持特定语言的主题</li> <li>semanticTokenScopes</li> <li>semanticTokenTypes</li> <li>snippets</li> <li>submenus</li> <li>taskDefinitions</li> <li>terminal</li> <li>themes</li> <li>typescriptServerPlugins</li> <li>views</li> <li>viewsContainers</li> <li>viewsWelcome</li> <li>walkthroughs</li></ul> <h2 id="三、开发实战"><a href="#三、开发实战" class="header-anchor">#</a> 三、开发实战</h2> <h3 id="_1-插件目标"><a href="#_1-插件目标" class="header-anchor">#</a> 1. 插件目标</h3> <p>看名释意： WordTranslate 词汇翻译</p> <p>预期实现：选择一段文字后，右键可以增加一个翻译的菜单，进行中英翻译</p> <h3 id="_2-目标实现"><a href="#_2-目标实现" class="header-anchor">#</a> 2. 目标实现</h3> <h4 id="a-增加右键菜单"><a href="#a-增加右键菜单" class="header-anchor">#</a> a. 增加右键菜单</h4> <p>官方文档：(Contribution Points | Visual Studio Code Extension API)[https://code.visualstudio.com/api/references/contribution-points#contributes.menus]</p> <p>package.json 文件修改</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;contributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;commands&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.helloWorld&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Hello World&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.doNotSupport&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;DoNotSupport&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 增加按钮配置内容</span>
    <span class="token property">&quot;menus&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;editor/context&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;command&quot;</span><span class="token operator">:</span> <span class="token string">&quot;wordtranslate.helloWorld&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;group&quot;</span><span class="token operator">:</span> <span class="token string">&quot;navigation&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>运行插件，右键 可看到增加的 Hello Wold 菜单，点击可看到右下角弹框提示</p> <div align="left" data-v-00c1afd2><img src="" height="350" class="g-img" data-v-00c1afd2></div> <h4 id="b-程序获取用户选择文本"><a href="#b-程序获取用户选择文本" class="header-anchor">#</a> b. 程序获取用户选择文本</h4> <p>src/extension.ts 修改</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> disposable <span class="token operator">=</span> vscode<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">registerCommand</span><span class="token punctuation">(</span><span class="token string">'wordtranslate.helloWorld'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// vscode.window.showInformationMessage('Hello vscode !');</span>
    <span class="token comment">// 获取当前激活的文本编辑器实例</span>
    <span class="token keyword">const</span> editor <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取当前用户选中的文本</span>
      <span class="token keyword">const</span> selection <span class="token operator">=</span> editor<span class="token punctuation">.</span>selection<span class="token punctuation">;</span>
      <span class="token keyword">const</span> selectedText <span class="token operator">=</span> editor<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>selection<span class="token punctuation">)</span><span class="token punctuation">;</span>

      vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">选中的文本是：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>selectedText<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span><span class="token function">showInformationMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">当前没有打开的文本编辑器。</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>以上代码实例将原本的 Hello vscode提示，修改为根据用户选择文本进行提示。效果如下：</p> <div align="left" data-v-00c1afd2><img src="" height="350" class="g-img" data-v-00c1afd2></div> <h4 id="c-用户选择文本后自动弹出提示"><a href="#c-用户选择文本后自动弹出提示" class="header-anchor">#</a> c. 用户选择文本后自动弹出提示</h4> <p>失败方案，通过右键菜单点击后提示弹框，展示不方便，所以换成以下方案</p> <p>思路：利用鼠标移上hover弹出provider，包含选择的文本</p> <p>src/extension.ts 修改</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 定义一个HoverProvider</span>
<span class="token keyword">const</span> hoverProvider <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">provideHover</span><span class="token punctuation">(</span>document<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> position<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> editor <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 获取当前用户选中的文本</span>
      <span class="token keyword">const</span> selection <span class="token operator">=</span> editor<span class="token punctuation">.</span>selection<span class="token punctuation">;</span>
      <span class="token keyword">const</span> selectedText <span class="token operator">=</span> editor<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>selection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span><span class="token function">Hover</span><span class="token punctuation">(</span><span class="token string">'选择文本：'</span> <span class="token operator">+</span> selectedText<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 注册HoverProvider</span>
<span class="token keyword">const</span> languageSelector <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token comment">// 匹配到对应的文件才激活HoverProvider</span>
  <span class="token punctuation">{</span> language<span class="token operator">:</span> <span class="token string">'javascript'</span><span class="token punctuation">,</span> scheme<span class="token operator">:</span> <span class="token string">'file'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> showTranslate <span class="token operator">=</span> vscode<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">registerHoverProvider</span><span class="token punctuation">(</span>languageSelector<span class="token punctuation">,</span> hoverProvider<span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span>subscriptions<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>showTranslate<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>但是上述文件在 activate 中，即插件激活后才会被启动，打开调试后右键菜单点击Hello World之后，插件激活后可以查看效果，若需要编辑器启动即启动插件，则需要增加相应的配置</p> <p>package.json 修改</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;activationEvents&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;onLanguage:javascript&quot;</span> <span class="token comment">// 检测到打开js文件时启动插件</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样当编辑器打开js文件时，插件就会启动，效果如下：</p> <div align="left" data-v-00c1afd2><img src="" height="350" class="g-img" data-v-00c1afd2></div> <h4 id="d-实现翻译"><a href="#d-实现翻译" class="header-anchor">#</a> d. 实现翻译</h4> <p>使用第三方翻译API，这里使用百度翻译API</p> <p>首先注册成为开发者，地址：<a href="https://fanyi-api.baidu.com/" target="_blank" rel="noopener noreferrer">百度翻译开放平台 (baidu.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>接入百度翻译API</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>  <span class="token keyword">const</span> hoverProvider <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">provideHover</span><span class="token punctuation">(</span>document<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> position<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> editor <span class="token operator">=</span> vscode<span class="token punctuation">.</span>window<span class="token punctuation">.</span>activeTextEditor<span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>editor<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取当前用户选中的文本</span>
        <span class="token keyword">const</span> selection <span class="token operator">=</span> editor<span class="token punctuation">.</span>selection<span class="token punctuation">;</span>
        <span class="token keyword">const</span> selectedText <span class="token operator">=</span> editor<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>selection<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>selectedText<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> translation <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">translate</span><span class="token punctuation">(</span>selectedText<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>translation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span><span class="token function">Hover</span><span class="token punctuation">(</span><span class="token string">&quot;翻译文本：&quot;</span> <span class="token operator">+</span> translation<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">vscode</span><span class="token punctuation">.</span><span class="token function">Hover</span><span class="token punctuation">(</span><span class="token string">&quot;选择文本：&quot;</span> <span class="token operator">+</span> selectedText<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 注册HoverProvider</span>
  <span class="token keyword">const</span> languageSelector <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> language<span class="token operator">:</span> <span class="token string">&quot;javascript&quot;</span><span class="token punctuation">,</span> scheme<span class="token operator">:</span> <span class="token string">&quot;file&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> showTranslate <span class="token operator">=</span> vscode<span class="token punctuation">.</span>languages<span class="token punctuation">.</span><span class="token function">registerHoverProvider</span><span class="token punctuation">(</span>
    languageSelector<span class="token punctuation">,</span>
    hoverProvider
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">translate</span><span class="token punctuation">(</span>text<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 百度翻译的 API 地址和 APP ID 与密钥</span>
    <span class="token keyword">const</span> apiEndpoint <span class="token operator">=</span> <span class="token string">&quot;https://fanyi-api.baidu.com/api/trans/vip/translate&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> appid <span class="token operator">=</span> <span class="token string">&quot;your_own_appid&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 此处替换为你自己的开发者appid</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> <span class="token string">&quot;your_own_key&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 此处替换为你自己的额开发者key</span>

    <span class="token comment">// 设置 API 请求参数</span>
    <span class="token keyword">const</span> sourceLang <span class="token operator">=</span> <span class="token string">&quot;auto&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> targetLang <span class="token operator">=</span> <span class="token string">&quot;zh&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> query <span class="token operator">=</span> text<span class="token punctuation">;</span>
    <span class="token keyword">const</span> salt <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 随机数，用于签名</span>
    <span class="token keyword">const</span> sign <span class="token operator">=</span> <span class="token function">baiduSign</span><span class="token punctuation">(</span>query<span class="token punctuation">,</span> appid<span class="token punctuation">,</span> salt<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?q=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>
      query
    <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;from=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sourceLang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;to=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>targetLang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;appid=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;salt=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>salt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;sign=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sign<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token comment">// 发送 HTTP 请求获取翻译结果</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> req <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>apiEndpoint <span class="token operator">+</span> params<span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token operator">?.</span>trans_result<span class="token operator">?.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>trans_result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;Translation failed!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">baiduSign</span><span class="token punctuation">(</span>query<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> appid<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> salt<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算百度翻译 API 的签名，用于 API 认证</span>
    <span class="token keyword">const</span> signString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>salt<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> md5 <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;md5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">md5</span><span class="token punctuation">(</span>signString<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p>效果如下：</p> <div align="left" data-v-00c1afd2><img src="" height="150" class="g-img" data-v-00c1afd2></div> <p>基于以上内容，我们可以获取用户选择的文本，并且接入百度翻译API翻译成指定语言的文本，并在鼠标hover时展示，目标功能基本完成</p> <h2 id="四、发布"><a href="#四、发布" class="header-anchor">#</a> 四、发布</h2> <h3 id="_1-发布方式"><a href="#_1-发布方式" class="header-anchor">#</a> 1. 发布方式</h3> <h5 id="a-本地文件"><a href="#a-本地文件" class="header-anchor">#</a> a. 本地文件</h5> <p>直接把文件夹发给别人，让别人找到 vscode 插件存放目录放进去，然后重启 vscode，一般不推荐</p> <h4 id="b-打包成-vsix-插件"><a href="#b-打包成-vsix-插件" class="header-anchor">#</a> b. 打包成 vsix 插件</h4> <p>打包成vsix插件，发给别人安装，如果插件涉及到机密不方便发送到应用市场，可以尝试使用这种方式</p> <h4 id="c-发布到官网应用市场"><a href="#c-发布到官网应用市场" class="header-anchor">#</a> c. 发布到官网应用市场</h4> <p>注册开发者账号，发布到官网应用市场，这个发布和npm一样是不需要审核的。</p> <h3 id="_2-打包成-vsix-插件"><a href="#_2-打包成-vsix-插件" class="header-anchor">#</a> 2. 打包成 vsix 插件</h3> <p>打包需要用到 vsce</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> vsce -g
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>打包，打包前需修改 README.md , 并且在 package.json 文件中增加 repository 配置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>vsce package
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div align="left" data-v-00c1afd2><img src="" height="300" class="g-img" data-v-00c1afd2></div> <p>安装时需 从插件右上角，从 VSIX 安装</p> <div align="left" data-v-00c1afd2><img src="" height="250" class="g-img" data-v-00c1afd2></div> <p>安装完成后就可以正常使用了，从已安装的插件中也可以找到</p> <div align="left" data-v-00c1afd2><img src="" height="350" class="g-img" data-v-00c1afd2></div> <h3 id="_3-发布到官网"><a href="#_3-发布到官网" class="header-anchor">#</a> 3. 发布到官网</h3> <p>发布过程未经过实操，可参考 <a href="https://www.cnblogs.com/liuxianan/p/vscode-plugin-publish.html" target="_blank" rel="noopener noreferrer">VSCode插件开发全攻略（十）打包、发布、升级 - 我是小茗同学 - 博客园 (cnblogs.com)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023-05-10 14:57:44</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/tech-blog/pages/7f7fee/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">爬虫</div></a> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/tech-blog/pages/7f7fee/" class="prev">爬虫</a></span> <!----></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/tech-blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/tech-blog/pages/a6c7de/"><div>
            Border为none和0的区别
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/tech-blog/pages/a47a7e/"><div>
            BFC原理
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/tech-blog/pages/75ed8f/"><div>
            一键换肤
            <!----></div></a> <span class="date">09-10</span></dt></dl> <dl><dd></dd> <dt><a href="/tech-blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2025
    <span>GuoLiBin6 </br><a href="https://beian.miit.gov.cn/" target="_blank">冀ICP备2022013865号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/tech-blog/assets/js/app.637b0608.js" defer></script><script src="/tech-blog/assets/js/2.f2dca868.js" defer></script><script src="/tech-blog/assets/js/40.36460bcd.js" defer></script><script src="/tech-blog/assets/js/3.d046dc27.js" defer></script>
  </body>
</html>
