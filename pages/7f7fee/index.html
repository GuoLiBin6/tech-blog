<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>爬虫 | 前端知识体系</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/tech-blog/images/favicon.ico">
    <meta name="description" content="收录前端学习涉及的内容总结">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    
    <link rel="preload" href="/tech-blog/assets/css/0.styles.936d675d.css" as="style"><link rel="preload" href="/tech-blog/assets/js/app.637b0608.js" as="script"><link rel="preload" href="/tech-blog/assets/js/2.f2dca868.js" as="script"><link rel="preload" href="/tech-blog/assets/js/39.6fda6c71.js" as="script"><link rel="prefetch" href="/tech-blog/assets/js/10.414784e6.js"><link rel="prefetch" href="/tech-blog/assets/js/11.85a4df20.js"><link rel="prefetch" href="/tech-blog/assets/js/12.24af88f9.js"><link rel="prefetch" href="/tech-blog/assets/js/13.b2b89f3f.js"><link rel="prefetch" href="/tech-blog/assets/js/14.1acabf33.js"><link rel="prefetch" href="/tech-blog/assets/js/15.8546cf66.js"><link rel="prefetch" href="/tech-blog/assets/js/16.14c6bd0c.js"><link rel="prefetch" href="/tech-blog/assets/js/17.a2a9698c.js"><link rel="prefetch" href="/tech-blog/assets/js/18.d85efb95.js"><link rel="prefetch" href="/tech-blog/assets/js/19.ddbbc2fe.js"><link rel="prefetch" href="/tech-blog/assets/js/20.435325d5.js"><link rel="prefetch" href="/tech-blog/assets/js/21.8189ab63.js"><link rel="prefetch" href="/tech-blog/assets/js/22.c92c7020.js"><link rel="prefetch" href="/tech-blog/assets/js/23.542786df.js"><link rel="prefetch" href="/tech-blog/assets/js/24.e4ba9d55.js"><link rel="prefetch" href="/tech-blog/assets/js/25.051dbda2.js"><link rel="prefetch" href="/tech-blog/assets/js/26.ec34ded3.js"><link rel="prefetch" href="/tech-blog/assets/js/27.f4b88994.js"><link rel="prefetch" href="/tech-blog/assets/js/28.fcd7878e.js"><link rel="prefetch" href="/tech-blog/assets/js/29.23106971.js"><link rel="prefetch" href="/tech-blog/assets/js/3.d046dc27.js"><link rel="prefetch" href="/tech-blog/assets/js/30.6a710278.js"><link rel="prefetch" href="/tech-blog/assets/js/31.fb01c8e0.js"><link rel="prefetch" href="/tech-blog/assets/js/32.fd23bb6c.js"><link rel="prefetch" href="/tech-blog/assets/js/33.8da1c46c.js"><link rel="prefetch" href="/tech-blog/assets/js/34.d8da18ad.js"><link rel="prefetch" href="/tech-blog/assets/js/35.ecd28619.js"><link rel="prefetch" href="/tech-blog/assets/js/36.d00c3ec5.js"><link rel="prefetch" href="/tech-blog/assets/js/37.1c7de521.js"><link rel="prefetch" href="/tech-blog/assets/js/38.a07fd877.js"><link rel="prefetch" href="/tech-blog/assets/js/4.89ec52c4.js"><link rel="prefetch" href="/tech-blog/assets/js/40.36460bcd.js"><link rel="prefetch" href="/tech-blog/assets/js/41.a8a2f08b.js"><link rel="prefetch" href="/tech-blog/assets/js/42.dfc6d188.js"><link rel="prefetch" href="/tech-blog/assets/js/43.6c5e7ccd.js"><link rel="prefetch" href="/tech-blog/assets/js/44.f5b788f2.js"><link rel="prefetch" href="/tech-blog/assets/js/5.c6df70b3.js"><link rel="prefetch" href="/tech-blog/assets/js/6.387a1608.js"><link rel="prefetch" href="/tech-blog/assets/js/7.7ba54467.js"><link rel="prefetch" href="/tech-blog/assets/js/8.7b1bbb2b.js"><link rel="prefetch" href="/tech-blog/assets/js/9.46af88e5.js">
    <link rel="stylesheet" href="/tech-blog/assets/css/0.styles.936d675d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/tech-blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识体系</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/GuoLiBin6/tech-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/tech-blog/images/avatar.jpeg"> <div class="blogger-info"><h3>GuoLiBin6</h3> <span>程序员永不下班</span></div></div> <nav class="nav-links"> <a href="https://github.com/GuoLiBin6/tech-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/tech-blog/pages/405749/" class="sidebar-link">介绍</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>软件开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node.js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目实战</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>收录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>搞事啦</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/tech-blog/pages/7f7fee/" aria-current="page" class="active sidebar-link">爬虫</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/7f7fee/#python-reptile" class="sidebar-link">python-reptile</a></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/7f7fee/#实现功能" class="sidebar-link">实现功能</a></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/7f7fee/#使用方式" class="sidebar-link">使用方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#目录解释" class="sidebar-link">目录解释</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#配置环境" class="sidebar-link">配置环境</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#有python环境" class="sidebar-link">有python环境：</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#无python环境" class="sidebar-link">无python环境：</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/tech-blog/pages/7f7fee/#实现思路" class="sidebar-link">实现思路</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#requests-模块获取文章内容-beautifulsoup-初步解析" class="sidebar-link">requests 模块获取文章内容，BeautifulSoup 初步解析</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#解析爬虫结果-生成js-dom树节点" class="sidebar-link">解析爬虫结果，生成js dom树节点</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#将内容写入本地文件" class="sidebar-link">将内容写入本地文件</a></li><li class="sidebar-sub-header level3"><a href="/tech-blog/pages/7f7fee/#主程序入口" class="sidebar-link">主程序入口</a></li></ul></li></ul></li></ul></section></li><li><a href="/tech-blog/pages/eda97b/" class="sidebar-link">vscode插件开发</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/tech-blog/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/tech-blog/categories/?category=%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB" title="分类" data-v-1baff76c>前端知识体系</a></li><li data-v-1baff76c><a href="/tech-blog/categories/?category=%E6%90%9E%E4%BA%8B%E5%95%A6" title="分类" data-v-1baff76c>搞事啦</a></li><li data-v-1baff76c><a href="/tech-blog/categories/?category=python" title="分类" data-v-1baff76c>python</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/GuoLiBin6" target="_blank" title="作者" class="beLink" data-v-1baff76c>GuoLiBin6</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2023-04-18</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">爬虫<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="python-reptile"><a href="#python-reptile" class="header-anchor">#</a> python-reptile</h2> <p>python 爬虫程序，仓库地址：https://github.com/GuoLiBin6/python-reptile</p> <h2 id="实现功能"><a href="#实现功能" class="header-anchor">#</a> 实现功能</h2> <p>输入知乎文章链接，爬取文章内容，按一定格式写入本地文件</p> <h2 id="使用方式"><a href="#使用方式" class="header-anchor">#</a> 使用方式</h2> <h3 id="目录解释"><a href="#目录解释" class="header-anchor">#</a> 目录解释</h3> <ul><li>article-reptile.py: 实现爬虫的文件</li> <li>article-reptile: article-reptile.py 打包为可执行文件后的目录，其中的 article-reptile文件 可在无python linux环境中直接运行</li> <li>src: 个人在做爬虫应用项目中的一部分目录，按实际情况定，当前爬虫程序写入本地文件时，会依赖此目录结构写入</li></ul> <h3 id="配置环境"><a href="#配置环境" class="header-anchor">#</a> 配置环境</h3> <p>python v3, pip v3, 安装程序中需要的 requests模块，bs4模块</p> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <h3 id="有python环境"><a href="#有python环境" class="header-anchor">#</a> 有python环境：</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>python article-reptile.py
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="无python环境"><a href="#无python环境" class="header-anchor">#</a> 无python环境：</h3> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>./article-reptile/article-reptile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="实现思路"><a href="#实现思路" class="header-anchor">#</a> 实现思路</h2> <h3 id="requests-模块获取文章内容-beautifulsoup-初步解析"><a href="#requests-模块获取文章内容-beautifulsoup-初步解析" class="header-anchor">#</a> requests 模块获取文章内容，BeautifulSoup 初步解析</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 获取文档</span>
<span class="token keyword">def</span> <span class="token function">get_remote_html</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># url = 'https://zhuanlan.zhihu.com/p/619085442'</span>
    url <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;请输入知乎文章地址：&quot;</span><span class="token punctuation">)</span>
    req <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    req<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'utf-8'</span>
    html <span class="token operator">=</span> req<span class="token punctuation">.</span>text
    domSoup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>  <span class="token comment"># 用BeautifulSoup解析</span>
    <span class="token keyword">return</span> domSoup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="解析爬虫结果-生成js-dom树节点"><a href="#解析爬虫结果-生成js-dom树节点" class="header-anchor">#</a> 解析爬虫结果，生成js dom树节点</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 解析dom</span>
<span class="token keyword">def</span> <span class="token function">get_parsed_dom</span><span class="token punctuation">(</span>domObj<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ret <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'type'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token string">'class'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
    name <span class="token operator">=</span> domObj<span class="token punctuation">.</span>name
    text <span class="token operator">=</span> domObj<span class="token punctuation">.</span>getText<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 普通文字</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">'p'</span> <span class="token keyword">and</span> text <span class="token keyword">and</span> <span class="token keyword">not</span> text<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'GitHub'</span><span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> text<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'官网地址'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'p'</span>
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-text'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
    <span class="token comment"># 一级标题</span>
    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">'h1'</span> <span class="token keyword">and</span> text<span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'h1'</span>
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-title mb-3 mt-2'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
    <span class="token comment"># 二级标题</span>
    <span class="token keyword">elif</span> name <span class="token operator">==</span> <span class="token string">'h2'</span> <span class="token keyword">and</span> text<span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'h1'</span>
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-h1 mb-3'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
    <span class="token comment"># 三级标题</span>
    <span class="token keyword">elif</span> name <span class="token operator">==</span> <span class="token string">'h3'</span> <span class="token keyword">and</span> text<span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'h2'</span>
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-h2 mb-3'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
    <span class="token keyword">elif</span> name <span class="token operator">==</span> <span class="token string">'img'</span><span class="token punctuation">:</span>
        <span class="token comment"># print(domObj)</span>
        imgRegx <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r'img.*src=&quot;(.*?)&quot;'</span><span class="token punctuation">)</span>  <span class="token comment"># 正则表达式匹配图片</span>
        imgUrls <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>imgRegx<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>domObj<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> i<span class="token punctuation">,</span> picUrl <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>imgUrls<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> picUrl<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'img'</span>
                ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-img w-100 mb-3'</span>
                ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> picUrl
    <span class="token keyword">elif</span> name <span class="token operator">==</span> <span class="token string">'li'</span> <span class="token keyword">and</span> text<span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'li'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-li mb-3'</span>
    <span class="token keyword">elif</span> name <span class="token operator">==</span> <span class="token string">'a'</span> <span class="token keyword">and</span> text<span class="token punctuation">:</span>
        ret<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span>
        ret<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">=</span> text
        ret<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span> <span class="token operator">=</span> domObj<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span>
        ret<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'article-link mb-3'</span>
    <span class="token keyword">return</span> ret

<span class="token comment"># 获取文档内容</span>
<span class="token keyword">def</span> <span class="token function">get_html_info</span><span class="token punctuation">(</span>domSoup<span class="token punctuation">)</span><span class="token punctuation">:</span>
    htmlInfo <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'title'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'content'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment"># 获得文章结构</span>
    <span class="token comment"># 标题</span>
    title <span class="token operator">=</span> domSoup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;Post-Title&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    titleDom <span class="token operator">=</span> get_parsed_dom<span class="token punctuation">(</span>title<span class="token punctuation">)</span>
    htmlInfo<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>titleDom<span class="token punctuation">)</span>
    title <span class="token operator">=</span> title<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">:</span>
        htmlInfo<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> title
        color_print<span class="token punctuation">(</span><span class="token string">'成功爬取文章：'</span> <span class="token operator">+</span> title<span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
    <span class="token comment"># 内容</span>
    content <span class="token operator">=</span> domSoup<span class="token punctuation">.</span>find<span class="token punctuation">(</span>attrs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;RichText&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> child <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span>descendants<span class="token punctuation">)</span><span class="token punctuation">:</span>
        parseDom <span class="token operator">=</span> get_parsed_dom<span class="token punctuation">(</span>child<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>parseDom<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            htmlInfo<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>parseDom<span class="token punctuation">)</span>

    <span class="token keyword">return</span> htmlInfo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br></div></div><h3 id="将内容写入本地文件"><a href="#将内容写入本地文件" class="header-anchor">#</a> 将内容写入本地文件</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 写入文件</span>
<span class="token keyword">def</span> <span class="token function">write_file</span><span class="token punctuation">(</span>htmlInfo<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 时间</span>
    localtime <span class="token operator">=</span> time<span class="token punctuation">.</span>localtime<span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    month <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y%m&quot;</span><span class="token punctuation">,</span> localtime<span class="token punctuation">)</span>
    day <span class="token operator">=</span> time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string">&quot;%Y%m%d&quot;</span><span class="token punctuation">,</span> localtime<span class="token punctuation">)</span>

    <span class="token comment"># article目录</span>
    articleDir <span class="token operator">=</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'/src/article'</span>

    <span class="token comment"># 序号</span>
    htmls <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>articleDir <span class="token operator">+</span> <span class="token string">'/html'</span><span class="token punctuation">)</span>
    htmlNum <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>htmls<span class="token punctuation">)</span>
    sortId <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>htmlNum <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    color_print<span class="token punctuation">(</span><span class="token string">'文章序号：'</span> <span class="token operator">+</span> sortId<span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>

    <span class="token comment"># 文章Id</span>
    has <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> filename <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>htmls<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 判断是否已经有同名文件</span>
        <span class="token keyword">if</span> filename <span class="token operator">==</span> day <span class="token operator">+</span> <span class="token string">'.html'</span><span class="token punctuation">:</span>
            has <span class="token operator">=</span> <span class="token number">1</span>
    articleId <span class="token operator">=</span> day
    <span class="token keyword">if</span> <span class="token punctuation">(</span>has <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        articleId <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">&quot;\033[32m请输入文章编号：\033[0m&quot;</span><span class="token punctuation">)</span>
    color_print<span class="token punctuation">(</span><span class="token string">'文章ID：'</span> <span class="token operator">+</span> articleId<span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>

    <span class="token comment"># 修改 config.js</span>
    configPath <span class="token operator">=</span> articleDir <span class="token operator">+</span> <span class="token string">'/config.js'</span>
    <span class="token keyword">for</span> line <span class="token keyword">in</span> fileinput<span class="token punctuation">.</span>FileInput<span class="token punctuation">(</span>configPath<span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        lineList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token string">'defaultArticleId'</span> <span class="token keyword">in</span> line<span class="token punctuation">:</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;  defaultArticleId: '&quot;</span> <span class="token operator">+</span> articleId <span class="token operator">+</span> <span class="token string">&quot;',\n&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> <span class="token string">'articleList'</span> <span class="token keyword">in</span> line<span class="token punctuation">:</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;      {\n&quot;</span><span class="token punctuation">)</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;        sortId: &quot;</span> <span class="token operator">+</span> sortId <span class="token operator">+</span> <span class="token string">&quot;,\n&quot;</span><span class="token punctuation">)</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;        id: '&quot;</span> <span class="token operator">+</span> articleId <span class="token operator">+</span> <span class="token string">&quot;',\n&quot;</span><span class="token punctuation">)</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;        title: '&quot;</span> <span class="token operator">+</span> htmlInfo<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">&quot;',\n&quot;</span><span class="token punctuation">)</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">&quot;      },\n&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            lineList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>lineList<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 修改默认文章</span>
    htmlLines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;!DOCTYPE html&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;html lang=&quot;en&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'@require(\'../lib/app/components/head.html\')\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;title&gt;了解云计算_开源融合云_云联壹云&lt;/title&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;meta name=&quot;keywords&quot; content=&quot;云计算&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;meta name=&quot;description&quot; content=&quot;云联壹云-云计算&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'@require(\'../lib/app/components/head2.html\')\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;body id=&quot;version-body&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'  @require(\'../lib/app/components/header.html\')\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'  &lt;div class=&quot;article-dom py-5 mt-2&quot; id=&quot;article-dom&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'    &lt;div class=&quot;container&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'        &lt;div class=&quot;article-wrapper&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'            &lt;!-- 文章内容 --&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'            &lt;div id=&quot;article-content&quot; class=&quot;article-content&quot; data-id=&quot;'</span> <span class="token operator">+</span> articleId <span class="token operator">+</span> <span class="token string">'&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;!-- \n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;h1 class=&quot;mb-3 mt-2 article-title&quot;&gt;&lt;/h1&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;img src=&quot;https://pic4.zhimg.com/v2-b5d1f2d2699f8b13acb3e2d5690c062f_b.jpg&quot; class=&quot;article-img w-70 mb-3&quot; alt=&quot;&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;h1 class=&quot;mb-3 article-h1&quot;&gt;&lt;/h1&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;h2 class=&quot;mb-3 article-h2&quot;&gt;&lt;/h1&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;p class=&quot;article-text&quot;&gt;&lt;/p&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'               --&gt;\n'</span><span class="token punctuation">)</span>
    <span class="token comment"># 文章正文</span>
    hN <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>htmlInfo<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'img'</span><span class="token punctuation">:</span>
            htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">' class=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot; src=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot; /&gt;\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">elif</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'article-h'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">' class=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot; id=&quot;h-'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>hN<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&quot;&gt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&gt;\n'</span><span class="token punctuation">)</span>
            hN <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">elif</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'a'</span><span class="token punctuation">:</span>
            htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">' class=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot; href=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot;&gt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&gt;\n'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">' class=&quot;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&quot;&gt;'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'text'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/'</span> <span class="token operator">+</span> line<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'            &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'            &lt;div id=&quot;article-sidepage&quot; class=&quot;article-sidepage&quot;&gt;\n'</span><span class="token punctuation">)</span>
    <span class="token comment"># 判断是否包含目录</span>
    hNum <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>htmlInfo<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token string">'article-h1'</span> <span class="token keyword">in</span> line<span class="token punctuation">[</span><span class="token string">'class'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            hNum <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> hNum <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;div class=&quot;article-catalogue&quot;&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;sidepage-title&quot;&gt;目录&lt;/div&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;catalogue-list&quot; id=&quot;article-catalogue-list&quot;&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;!-- &lt;div class=&quot;article-catalogue&quot;&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;sidepage-title&quot;&gt;目录&lt;/div&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;catalogue-list&quot; id=&quot;article-catalogue-list&quot;&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
        htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;/div&gt; --&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;div class=&quot;article-others&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;sidepage-title&quot;&gt;其它&lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;div class=&quot;other-article-list&quot; id=&quot;article-other-list&quot;&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                  &lt;!-- &lt;div class=&quot;other-article-item&quot; data-id=&quot;&quot;&gt;&lt;/div&gt; --&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'                &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'              &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'            &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'        &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'    &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'  &lt;/div&gt;\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'  @require(\'../lib/app/components/contact.html\')\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'  @require(\'../lib/app/components/footer.html\')\n'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;/body&gt;'</span><span class="token punctuation">)</span>
    htmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'&lt;/html&gt;'</span><span class="token punctuation">)</span>

    indexHtml <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>articleDir <span class="token operator">+</span> <span class="token string">'/index.html'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    indexHtml<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span><span class="token punctuation">)</span>
    indexHtml<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>htmlLines<span class="token punctuation">)</span><span class="token punctuation">)</span>
    indexHtml<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 新增文章</span>
    newHtmlLines <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> line <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>htmlLines<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'../'</span> <span class="token keyword">in</span> line<span class="token punctuation">)</span><span class="token punctuation">:</span>
            line <span class="token operator">=</span> line<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token string">'../../'</span><span class="token punctuation">)</span>
        newHtmlLines<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">)</span>

    newHtml <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>articleDir <span class="token operator">+</span> <span class="token string">'/html/'</span> <span class="token operator">+</span> articleId <span class="token operator">+</span>
                   <span class="token string">'.html'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>
    newHtml<span class="token punctuation">.</span>truncate<span class="token punctuation">(</span><span class="token punctuation">)</span>
    newHtml<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>newHtmlLines<span class="token punctuation">)</span><span class="token punctuation">)</span>
    newHtml<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br></div></div><h3 id="主程序入口"><a href="#主程序入口" class="header-anchor">#</a> 主程序入口</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># 主程序</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    domSoup <span class="token operator">=</span> get_remote_html<span class="token punctuation">(</span><span class="token punctuation">)</span>
    htmlInfo <span class="token operator">=</span> get_html_info<span class="token punctuation">(</span>domSoup<span class="token punctuation">)</span>
    write_file<span class="token punctuation">(</span>htmlInfo<span class="token punctuation">)</span>

main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023-04-18 19:24:52</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/tech-blog/pages/86921c/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">软件推荐</div></a> <a href="/tech-blog/pages/eda97b/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">vscode插件开发</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/tech-blog/pages/86921c/" class="prev">软件推荐</a></span> <span class="next"><a href="/tech-blog/pages/eda97b/">vscode插件开发</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/tech-blog/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/tech-blog/pages/a6c7de/"><div>
            Border为none和0的区别
            <!----></div></a> <span class="date">09-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/tech-blog/pages/a47a7e/"><div>
            BFC原理
            <!----></div></a> <span class="date">09-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/tech-blog/pages/75ed8f/"><div>
            一键换肤
            <!----></div></a> <span class="date">09-10</span></dt></dl> <dl><dd></dd> <dt><a href="/tech-blog/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2025
    <span>GuoLiBin6 </br><a href="https://beian.miit.gov.cn/" target="_blank">冀ICP备2022013865号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/tech-blog/assets/js/app.637b0608.js" defer></script><script src="/tech-blog/assets/js/2.f2dca868.js" defer></script><script src="/tech-blog/assets/js/39.6fda6c71.js" defer></script>
  </body>
</html>
